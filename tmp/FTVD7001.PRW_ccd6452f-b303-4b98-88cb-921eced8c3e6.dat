#INCLUDE 'PROTHEUS.CH'


/*/{Protheus.doc} FTVD7001
@description Gravação do orçamento
@type User Function
@author Alan Teles de Oliveira
@since 07/01/2019
@version 11.8
@param ExpN1, Numérico, Tipo da operação de acordo com as opções: 1 - Orçamento / 2 - Venda / 3 - Pedido
@param ExpA2, Array of Record, Array com os dados da devolução de acordo com a estrutura: [1] - Série da NF de devolução / [2] - Número da NF de devolução / [3] - Código do cliente da devolução / [4] - Loja do cliente da devolução / [5] - Tipo de operação (1=Troca; 2=Devolução) Esse array é preenchido pela rotina LOJA720 quando se realiza uma operação de troca/devolução.
@param ExpN3, Numérico, Tipo de documento impresso pela venda de acordo com as opções: 1 - Cupom fiscal / 2 - Nota fiscal
@return lRet, logico, verdadeiro se liberado a finalização da venda
@see http://tdn.totvs.com/pages/releaseview.action?pageId=6784482
/*/
User Function FTVD7001()
    
    Local nTipoOper := ParamIXB[1]
    Local aDocDev   := ParamIXB[2]
    Local nTipoDoc  := ParamIXB[2]
    Local lRet      := .T.
    Local aArea 	:= GetArea()
    
    If nTipoOper = 1 .and. ( .not. cFilAnt = '04MT0001' )
        
        MsgInfo('Não será permitido gravar orçamento apenas vendas.', 'Atenção - LJ7001')
        
        lRet := .F.

    EndIf

    If lRet .and. ( .not. cFilAnt = '04MT0001' )

	    lRet := u_FA701A01() 

    EndIf

    If lRet .and. ( .not. cFilAnt = '04MT0001' )

	    lRet := u_SF05A02A() 

    EndIf    

    RestArea(aArea)

Return lRet