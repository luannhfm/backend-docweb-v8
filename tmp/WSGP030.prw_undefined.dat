#include 'protheus.ch'
#include 'parmtype.ch'

/*/{Protheus.doc} WSGP030
Ponto de entrada ativado durante a execução do método Get GetPaymentReceipt (). – Recibo de Pagamento Portal.
Através desse ponto é possível alterar dados cadastrais a serem impressos no Recibo de Pagamento via Portal de Gestão de Capital Humano.
@author Franklin de Brito de Oliveira
@since 09/09/2019
@return oObjPgto, Objeto utilizado para preenchimento do recibo de pagamento portal.
@see https://tdn.totvs.com.br/pages/releaseview.action?pageId=189304283
@type User function
/*/
User Function WSGP030()
Local oObjPgto	:= ParamIXB //objeto com os campos
Local cFuncRel	:= oObjPgto:FunctionDescription
Local cFuncAtu	:= Alltrim( Posicione("SRJ", 1, xFilial("SRJ", oObjPgto:Branch) + SRA->RA_CODFUNC, "SRJ->RJ_DESC")   )
Local cSigCar	:= Alltrim( Posicione("SQ3", 1, xFilial("SQ3", oObjPgto:Branch) + SRA->RA_CARGO  , "SQ3->Q3_XSIGLA") )
Local cCarCon	:= AllTrim( Posicione("SQ3", 1, xFilial("SQ3", oObjPgto:Branch) + SRA->RA_XCARCON, "SQ3->Q3_XSIGLA") )
Local cUndAdm	:= AllTrim( SRA->RA_XUNDADM )

	//Aqui estamos com a SRA posicionada
	//Verifico se a função impressa é diferente da atual
	If cFuncRel == cFuncAtu
		If !Empty(cSigCar)
			oObjPgto:FunctionDescription := cUndAdm + " - " + cSigCar + "/" + cFuncAtu
		EndIf
	EndIf
	
Return oObjPgto