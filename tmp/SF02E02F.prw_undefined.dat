#include 'Protheus.ch'

/*/{Protheus.doc} SF02E02F
	Função para validar se os campos [A2_COD/A2_LOJA] foram alterados
	ou estão fora do padrão.
	Função utilizada na validação de usuário dos campos [A2_COD/A2_LOJA].

@author Franklin B. Oliveira
@since 28/02/2018

@type function
/*/
User Function SF02E02F()

Local lRet		:= .T.
Local oModel 	:= FWModelActive()
Local cCampo	:= ReadVar()
Local cValor	:= AllTrim(&(ReadVar()))
Local cTipo		:= oModel:GetValue("SA2MASTER", 'A2_TIPO')
Local cCGC		:= oModel:GetValue("SA2MASTER", 'A2_CGC')
	
	If !(cTipo == 'X')
		If cCampo == "M->A2_COD"
			If (cTipo == 'F') .And. (Substr(cCGC,1,9) != cValor)
				lRet := .F.
			ElseIf (cTipo == 'J') .And. (Substr(cCGC,1,8) != cValor)
				lRet := .F.
			EndIf
		ElseIf cCampo == "M->A2_LOJA"
			If (cTipo == 'F') .And. ('00PF' != cValor)
				lRet := .F.
			ElseIf (cTipo =='J') .And. (Substr(cCGC,9,4) != cValor)
				lRet := .F.
			EndIf
		EndIf
	EndIf
	
Return (lRet)