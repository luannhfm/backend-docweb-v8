#Include 'Protheus.ch'
#Include 'FwMVCDef.ch'

User Function SF99A02F()
	Local oBrowse

	// Instanciamento da Classe de Browse
	oBrowse := FWMBrowse():New()
	// Definição da tabela do Browse
	oBrowse:SetAlias('ZDK')
	// Titulo da Browse
	oBrowse:SetDescription('Cadastro de Integrações')
	// Opcionalmente pode ser desligado a exibição dos detalhes
	oBrowse:DisableDetails()
	// Ativação da Classe
	oBrowse:Activate()

Return Nil

Static Function MenuDef()
	Local aRotina := {}
	ADD OPTION aRotina Title 'Visualizar' Action 'VIEWDEF.SF99A02F' OPERATION 2 ACCESS 0
	ADD OPTION aRotina Title 'Incluir' Action 'VIEWDEF.SF99A02F' OPERATION 3 ACCESS 0
	ADD OPTION aRotina Title 'Alterar' Action 'VIEWDEF.SF99A02F' OPERATION 4 ACCESS 0
	ADD OPTION aRotina Title 'Excluir' Action 'VIEWDEF.SF99A02F' OPERATION 5 ACCESS 0
	ADD OPTION aRotina Title 'Imprimir' Action 'VIEWDEF.SF99A02F' OPERATION 8 ACCESS 0
	ADD OPTION aRotina Title 'Copiar' Action 'VIEWDEF.SF99A02F' OPERATION 9 ACCESS 0
Return aRotina

Static Function ModelDef()
	Local oStruZDK := FWFormStruct( 1, 'ZDK' )
	Local oModel // Modelo de dados construído

	// Cria o objeto do Modelo de Dados
	oModel := MPFormModel():New( 'F99A01FM' )
	// Adiciona ao modelo um componente de formulário
	oModel:AddFields( 'ZDKMASTER', /*cOwner*/, oStruZDK )
	// Adiciona a descrição do Modelo de Dados
	oModel:SetDescription( 'Cadastro de Integrações' )
	// Adiciona a descrição dos Componentes do Modelo de Dados
	oModel:GetModel( 'ZDKMASTER' ):SetDescription( 'Cadastro de Integrações' )
	// Define a chave primária do modelo
	oModel:SetPrimaryKey( { "ZDK_FILIAL", "ZDK_CODIGO" } )

Return oModel

Static Function ViewDef()
	Local oModel := FWLoadModel( 'SF99A02F' )
	Local oStruZDK := FWFormStruct( 2, 'ZDK' )
	Local oView

	// Cria o objeto de View
	oView := FWFormView():New()
	// Define qual o Modelo de dados será utilizado na View
	oView:SetModel( oModel )
	// Adiciona no nosso View um controle do tipo formulário
	// (antiga Enchoice)
	oView:AddField( 'VIEW_ZDK', oStruZDK, 'ZDKMASTER' )
	// Criar um "box" horizontal para receber algum elemento da view
	oView:CreateHorizontalBox( 'TELA' , 100 )
	// Relaciona o identificador (ID) da View com o "box" para exibição
	oView:SetOwnerView( 'VIEW_ZDK', 'TELA' )

Return oView
