#INCLUDE "PROTHEUS.CH"
#INCLUDE 'FWMVCDEF.CH'

/*/{Protheus.doc} SF7306J
Cadastro de Entidades - CRP

@author 	Jose Leite de Barros Neto
@since 	21/06/2016
@version 	1.0

@return 	Nil, Nulo
/*/
User Function SF7306J()
	
	Local oBrowse	:= Nil
	
	Private aRotina	:= MenuDef()
	
	//Cria o Browse
	oBrowse := FWMBrowse():New()
	oBrowse:SetAlias('ZC0')
	oBrowse:SetDescription('Cadastro de Entidades')
	
	oBrowse:Activate()
	
Return( Nil )


/** {Protheus.doc} MenuDef
Funcao de definicao do Menu

@author: 	Jose Leite de Barros Neto
@since: 	21/06/2016
@Uso: 		SFIEMT
*/
Static Function MenuDef()
	
	Local _aRotina := {}
	
	ADD OPTION _aRotina TITLE "Pesquisar"		ACTION "PESQBRW"        		OPERATION 1 ACCESS 0
	ADD OPTION _aRotina TITLE "Visualizar"	ACTION "VIEWDEF.SF7306J" 	OPERATION 2 ACCESS 0
	ADD OPTION _aRotina TITLE "Incluir"  		ACTION "VIEWDEF.SF7306J" 	OPERATION 3 ACCESS 0
	ADD OPTION _aRotina TITLE "Alterar"		ACTION "VIEWDEF.SF7306J" 	OPERATION 4 ACCESS 0
	ADD OPTION _aRotina TITLE "Excluir"   	ACTION "VIEWDEF.SF7306J" 	OPERATION 5 ACCESS 0
	ADD OPTION _aRotina TITLE "Imprimir"		ACTION "VIEWDEF.SF7306J" 	OPERATION 8 ACCESS 0  
	ADD OPTION _aRotina TITLE "Copiar"			ACTION "VIEWDEF.SF7306J" 	OPERATION 9 ACCESS 0

Return( _aRotina )


/** {Protheus.doc} ModelDef
Define o modelo de dados do contato

@author: 	Jose Leite de Barros Neto
@since: 	21/06/2016
@Uso: 		SFIEMT
*/
Static Function ModelDef()
	
	Local oModel
	Local oStruZC0	:= FWFormStruct(1,'ZC0',/*bAvalCampo*/,/*lViewUsado*/)

	oModel := MPFormModel():New('SF7306JM',/*bPreValidacao*/,/*bPosValidacao*/,/*bCommit*/,/*bCancel*/)
	oModel:AddFields('ZC0MASTER', /*cOwner*/,oStruZC0, /*bPreValidacao*/, /*bPosValidacao*/, /*bCarga*/ )
	oModel:SetDescription('Cadastro de Entidades')
	
	oModel:SetPrimaryKey( { "ZC0_FILIAL", "ZC0_CODIGO", "ZC0_DESCR" } )
	
Return( oModel )


/** {Protheus.doc} ViewDef
Define a interface para cadastro de contato em MVC.

@author: 	Jose Leite de Barros Neto
@since: 	31/05/2016
@Uso: 		SFIEMT
*/
Static Function ViewDef()
	
	Local oView
	Local oModel   := FWLoadModel('SF7306J')
	Local oStruZC0 := FWFormStruct(2,'ZC0')
	
	//Cria o Objeto da View
	oView := FWFormView():New()

	//Define qual o Modelo de dados será utilizado
	oView:SetModel( oModel )

	//Adiciona no View um controle do tipo FormField (Antiga Enchoice)
	oView:AddField( 'VIEW_ZC0',oStruZC0, 'ZC0MASTER' )

	//Cria um BOX horizontal para receber elementos da View
	oView:CreateHorizontalBox('TELA' , 100 )

	//Relaciona o ID da View com o Box para exibição
	oView:SetOwnerView( 'VIEW_ZC0' , 'TELA' )
	
Return( oView )