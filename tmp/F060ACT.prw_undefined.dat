#Include 'Protheus.ch'


//------------------------------------------------------
/*/{Protheus.doc} F060ACT
Grava na transferência de carteira

@author Allan da Silva Faria
@since 25/05/2016
@version 1.0
/*/
//------------------------------------------------------
User Function F060ACT()

Local _cSituAt := ParamIXB[1,1]	//-- Situação Atual
Local _cPort   := ParamIXB[1,2]	//-- Portador
Local _cAgen   := ParamIXB[1,3]	//-- Agencia
Local _cConta  := ParamIXB[1,4]	//-- Conta
Local _cSituAnt:= ParamIXB[1,8]	//-- Situação Anterior
Local _aHistCob:= Array(9)

//------------------------------------------------------------
//-- Grava Historico de Cobranla - Transferência de Carteira 
///-----------------------------------------------------------
_aHistCob[1]:= SE1->E1_CLIENTE
_aHistCob[2]:= SE1->E1_LOJA
_aHistCob[3]:= SE1->E1_PREFIXO 
_aHistCob[4]:= SE1->E1_NUM
_aHistCob[5]:= SE1->E1_PARCELA
_aHistCob[6]:= SE1->E1_TIPO
_aHistCob[7]:= STOD("//")
_aHistCob[8]:= "TRANSFERÊNCIA CARTERIA" + CRLF 
_aHistCob[8]+= "Situação Atual: " + _cSituAt + CRLF 
_aHistCob[8]+= "Situação Anterior: " + _cSituAnt + " " + FWGetSX5("07",PADR(_cSituAnt,6))[1,4]+ CRLF 
If .Not. Empty(_cPort)
	_aHistCob[8]+= "Portador: " + _cPort + CRLF 
	_aHistCob[8]+= "Agência: " + _cAgen + CRLF 
	_aHistCob[8]+= "Conta: " + _cConta+ CRLF 	  
EndIf
_aHistCob[9]:= "01"

//---------------------------------------
//-- Chama Função que grava historico
//---------------------------------------
U_SF06A74X(_aHistCob,"FINA060T")

Return Nil
