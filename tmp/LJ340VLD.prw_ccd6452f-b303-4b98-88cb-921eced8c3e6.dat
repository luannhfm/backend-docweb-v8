#Include 'Protheus.ch'

/*/{Protheus.doc} LJ340VLD 
@description Permissão para incluir validações na abertura automática do caixa.
@obs Utilizado para impedir o usuário de abrir o caixa sem informar o valor de troco.
@type  User Function
@author Alan Teles de Oliveira
@since 27/12/2018
@version 11.8
@return lRet, logico, verdadeiro se informado troco ou autorizado pelo superior.
@see http://tdn.totvs.com/pages/releaseview.action?pageId=6791080
/*/
User Function LJ340VLD()

    Local lRet := .T.

    If cFilAnt != '03MT0018'

        If oWizard:nPanel == 3 .and. nValor == 0

            If MsgNoYes('Atenção para abertura de caixa sem informar um valor de troco e necessário à confirmação do usuário superior deseja prosseguir?', 'Atenção - LJ340VLD')
                lRet := u_SFVUSERA('SF_GRSUPER', '001016', 'Abertura de caixa sem troto', 'G')
            Else
                lRet := .F.
            EndIf

        EndIf
        
    EndIf

Return lRet
