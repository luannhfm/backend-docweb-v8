#INCLUDE 'PROTHEUS.CH'


/*/{Protheus.doc} function_method_class_name
@description Ponto de Entrada que retorna as funcoes do Venda Assitida que serão desabilitadas

@author  Helitom Silva
@since   04/09/2019
@version 1.0

@return aRet, Array, Lista com nome das funcoes desabilitadas

@type Function
@obs Usado para não ficar disponível o desconto geral na Venda, sendo liberado apenas por Item.
@see (links_or_references)
/*/
User Function LJNOFUNC()

	Local aFuncoes := PARAMIXB[1]   //Array com as Funcoes Padrao disponiveis na Tela do Venda Assistida.
	Local nOperacao:= PARAMIXB[2]   //Operacao executada pela rotina (nOpc):  2=Visualizacao; 3=Finaliza venda; 4=Atendimento;
	Local aNotFunc := {} 			//Array com relcao de funcoes que serao desabilitadas.
	Local aDisable := {}
	Local nX       := 0


	If ( cFilAnt = '03MT0018' )

		aAdd( aNotFunc, "CTRL+D" 		    	) //Desabilita a funcao Recebimentos
		aAdd( aNotFunc, "CTRL+H" 				) //Desabilita a funcao Sangria
		aAdd( aNotFunc, "F8" 					) //Desabilita a funcao Detalhar item
		aAdd( aNotFunc, "F9"	 				) //Desabilita a funcao Frete
		aAdd( aNotFunc, "F10"		 			) //Desabilita a funcao Cliente
		aAdd( aNotFunc, "F11"		 			) //Desabilita a funcao Efetuar reserva
		aAdd( aNotFunc, "F12"		 			) //Desabilita a funcao Consultar reserva
		aAdd( aNotFunc, "CTRL+A" 				) //Desabilita a funcao Consultar estoque
		aAdd( aNotFunc, "CTRL+B" 				) //Desabilita a funcao Desconto
		aAdd( aNotFunc, "CTRL+C" 				) //Desabilita a funcao Tabela de Precos
		aAdd( aNotFunc, "Ctrl+E" 				) //Desabilita a funcao Consulta Eletronica.
		aAdd( aNotFunc, "CTRL+F" 				) //Desabilita a funcao Financiamento
		aAdd( aNotFunc, "CTRL+G" 				) //Desabilita a funcao Troca de Mercadorias
		aAdd( aNotFunc, "CTRL+I" 				) //Desabilita a funcao Suprimento
		aAdd( aNotFunc, "CTRL+J" 				) //Desabilita a funcao Perfil do Cliente
		aAdd( aNotFunc, "CTRL+G" 				) //Desabilita a funcao abre gaveta

	Else

		aAdd( aNotFunc, "CTRL+B" 				) //Desabilita a funcao Desconto

	Endif

	//Busca no array "_aFuncoes" quais as linhas do array que estao as funcoes que devem ser desabilitadas.
	For nX:=1 To Len(aNotFunc)
		nPosLinha := Ascan( aFuncoes, { |x| Upper(Alltrim(x[8,2])) == Upper(aNotFunc[nX]) } )
		If nPosLinha > 0
			aAdd( aDisable, nPosLinha )
		EndIf
	Next nX

Return aDisable
