#include 'Protheus.ch'

/*/{Protheus.doc} SF6904F
	Função utilizada no campo CN9_VLDCTR onde a variável cTipo indica o momento:
		cTipo = 1: Inicializador padrão
		cTipo = 2: Modo edição
	ATENÇÃO: Utilizada variável Private (cEspCtr) existente no fonte padrão CNTA100,
	para indicar a espécie do contrato:
		cEspCtr = 1:Contrato de compra
		cEspCtr = 2:Contrato de venda

@author Franklin de Brito de Oliveira
@since 24/03/2016
@param cTipo, characters, Indica o momento que está sendo executada

@return xRet, Varia conforme a variável cTipo

/*/
User Function SF6904F(cTipo)

	Local cEspCtr := ''
	Local xRet

	If IsInCallStack('CN300InCOM') //Compras
		cEspCtr := '1'
	ElseIf IsInCallStack('CN300InVEN') //Vendas
		cEspCtr := '2'
	EndIf
	
	If SubStr(cFilAnt,1,4) $ '02MT/03MT' 
		//Contrato de Venda
		If cEspCtr == '2'
			//Inic. Padrão
			If cTipo == '1'
				xRet 	:= '2'
			//Modo Edição
			Else
				xRet	:= .F.
			EndIf
		//Contrato de compra
		Else
			//Inic. Padrão
			If cTipo == '1'
				xRet 	:= ''
			//Modo Edição
			Else
				xRet	:= .T.
			EndIf
		EndIf
	Else
		//Inic. Padrão
		If cTipo == '1'
			xRet 	:= ''
		//Modo Edição
		Else
			xRet	:= .T.
		EndIf
	EndIf    

Return (xRet)