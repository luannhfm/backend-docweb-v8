/*/{Protheus.doc} MBRWBTNB
Ponto de entrada executado em todos os MBROWSE

@author 	j2a.luizjunior
@since 	13/03/2017
@version 	1.0
/*/

User Function MBRWBTN
	
	Local _aArea	:= GetArea()
	Local _lRet		:= .T.
	Local _nOpc		:= PARAMIXB[3]
	
	//Executar na FATA300 - Oportunidade de Venda
	If IsInCallStack("FATA300") 
		If _nOpc == 4 .AND. AD1->AD1_STATUS <> '1' 
			MsgStop("Este tipo de ação não é permitida para este Status de Proposta!")
			_lRet := .F.
		EndIf
	EndIf
	
	//Executar na FATA600 - Proposta comercial
	If IsInCallStack("FATA600") 
		If _nOpc == 4 .AND. ADY->ADY_STATUS <> 'A' 
			MsgStop("Este tipo de ação não é permitida para este Status de Proposta!")
			_lRet := .F.
		EndIf
	EndIf
	/*
	If "03MT" $ cFilAnt 
		If IsInCallstack("FATA600")
			DbSelectArea("AD5")
			AD5->(DbSetOrder(2)) //AD5_FILIAL+AD5_NROPOR
			AD5->(DbGoTop())
			If .Not. AD5->(DbSeek(AD1->AD1_FILIAL + AD1->AD1_NROPOR))
				MsgStop("Não existe apontamento de visita registrado para esta oportunidade. Não sera possivel a inclusão da proposta!","Erro")
				_lRet := .F.
			EndIf
			AD5->(DbCloseArea())
		EndIf
	EndIf
	*/
	RestArea(_aArea)
	
Return _lRet