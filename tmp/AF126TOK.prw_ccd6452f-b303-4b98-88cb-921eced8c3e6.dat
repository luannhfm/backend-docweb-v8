#INCLUDE 'PROTHEUS.CH'
#INCLUDE "FWMVCDEF.CH"

/*/{Protheus.doc} AF126TOK
	@description)
	@type User Function
	@author Desconhecido
	@since Desconhecido
	@version 1.0
	@param param, param_type, param_descr
	@return return, return_type, return_description
	@example
	(examples)
	@see (links_or_references)
	/*/
User Function AF126TOK()

	Local _aSNM := {}
	Local _lRet	:= .T.
	Local _lCmp	:= M->NM_MOTBX $ GetNewPar("MV_XMBXVEN", "01")

	Local aAreaSN3	:= SN3->(GetArea())
	Local aAreaSN1	:= SN1->(GetArea())
	Local aAreaFNS	:= FNS->(GetArea())
	Local aAreaFNR	:= FNR->(GetArea())
	Local aAreaFN9	:= FN9->(GetArea())
	Local aArea		:= GetArea()
	Local oModel	:= FwLoadModel("ATFA060")
	Local oModlFNS	:= oModel:GetModel("GridFNS")
	Local oModlFNR	:= oModel:GetModel("GridFNR")
	Local oModlFN9	:= oModel:GetModel("FieldFN9")
	Local oStrFN6	:= FWFormStruct( 1, "FN6", /*bAvalCampo*/, /*lViewUsado*/ )

	Public _aFldUs := {}
	_SetOwnerPrvt("lAtfAuto", .F. )

	oModel:Activate()

	oStrFN6:SetProperty( "FN6_FILORI"  	, MODEL_FIELD_INIT, {|| SNM->NM_FILDES }  )

	If PARAMIXB[1] == 3
		_aSNM := U_SF01A01X()
		
		If !Empty(_aSNM)	
			_aFldUs := AClone(_aSNM)
		Else
			_lRet := .F.
		EndIf
	EndIf 

Return _lRet