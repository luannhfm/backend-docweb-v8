#Include 'Protheus.ch'

/*/{Protheus.doc} MA103ATF
@description O Ponto de Entrada MA103ATF  permite manipular os campos enviados para integração com Ativo Fixo nas tabelas SN1 (aCab) e SN3(aItens).
@obs Na função A103GrvAtf (Gravação do Ativo Fixo), antes da chamada da função ATFA012 (Cadastros Ativos Imobilizados).
	Programa Fonte:
	MATA103.PRW
	Função:
	A103GrvAtf - Gravação do Ativo Fixo
@author Franklin B. Oliveira
@since 09/05/2018
@version 12.1.17
@Param  PARAMIXB[1], Vetor, Cabeçalho (aCab - SN1)
@Param  PARAMIXB[2], Vetor, Itens (aItens - SN3)
@Return ARET[1], Vetor, Cabeçalho (aCab - SN1)
@Return ARET[2], Vetor, Itens (aItens - SN3)
@type function
@See http://tdn.totvs.com/pages/releaseview.action?pageId=319783498
@history 21/01/2019, Alan Teles de Oliveira, removido campo N1_LOCAL devido o departamento de classificação não ter condições de saber qual o endereço correto para o produto do documento a classificar.
/*/
User Function MA103ATF()

	Local aCab 		:= ParamIXB[1] 
	Local aItens	:= ParamIXB[2] 
	Local _aArea := GetArea()
	Local _aAreaSC7 := SC7->(GetArea())
    Local _cSolic := ""
	//Adição de campos customizados - SN1
	//aAdd(aCab, {"N1_LOCAL", SD1->D1_XLOCSN1 })
	aAdd(aCab, {"N1_VLAQUIS", SD1->D1_VUNIT })
	
	aAdd(aCab, {"N1_XPEDIDO", SD1->D1_PEDIDO })
	
	If !Empty(SD1->D1_PEDIDO)
		_cSolic := Posicione("SC7",1,xFilial("SC7")+SD1->D1_PEDIDO+SD1->D1_ITEMPC,"C7_NUMSC" )
		If !Empty(_cSolic)
			aAdd(aCab, {"N1_XSOLICI", _cSolic })			
		EndIf
	EndIf
    /*
    If !Empty(_cSolic)
       	SN1->(dbSetOrder(1))
       	IF SN1->(dbSeek(XFilial("SN1")+SN1->(N1_CBASE+N1_ITEM)))
       	RecLock("SN1",.F.)
		  SN1->N1_XSOLICI := _cSolic           
		MSUNLOCK("SN1")
	    Endif
	Endif
	 */
	RestArea(_aAreaSC7)
	RestArea(_aArea)
	
Return ({aCab,aItens})
