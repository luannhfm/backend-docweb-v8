#include 'protheus.ch'
#include 'fwmvcdef.ch'

/*/{Protheus.doc} SF69A04X
@description MVC da Tela HOras medidas por Docente

@author  Daniel Castro - TOTVS
@since   31/03/2021
@version 1.0 
/*/
User Function SF69A12X(oModel)

	Local cAlias := "ZBG"
	Local cFiltra := ""
	Local aArea := GetArea()

	Private cCadastro := "HORAS MEDIDAS"
	Private aRotina := {}

// opÃ§Ãµes de filtro utilizando a FilBrowse
	Private aIndexZBG := {}
	Private bFiltraBrw:= ""

	dbSelectArea("ZBF")
	ZBF->(dbSetOrder(1))
	If ZBF->(dbSeek(xFilial("ZBF") + SA2->A2_COD))

		cFiltra := "Alltrim(ZBG_DOCENT) == '" + Alltrim(ZBF->ZBF_CODPRO) + "' .AND. ZBG_FILIAL == '" + ZBF->ZBF_FILIAL + "' "
		bFiltraBrw:= { || FilBrowse(cAlias,@aIndexZBG,@cFiltra) }

// quando a funÃ§Ã£o FilBrowse for utilizada a funÃ§Ã£o de pesquisa deverÃ¡ ser a PesqBrw ao invÃ©s da AxPesqui

		AADD(aRotina,{"Pesquisar"   ,"PesqBrw"      ,0,1})
		AADD(aRotina,{"Visualizar"  ,"AxVisual"     ,0,2})

		dbSelectArea(cAlias)
		dbSetOrder(1)

// Cria o filtro na MBrowse utilizando a funÃ§Ã£o FilBrowse

		Eval(bFiltraBrw)
		dbSelectArea(cAlias)
		dbGoTop()

		mBrowse(,,,,cAlias)
// Deleta o filtro utilizado na funÃ§Ã£o FilBrowse

	EndFilBrw(cAlias,aIndexZBG)

Else
	Help(NIL, NIL, "Operação Inválida", NIL, "Não existe registro Relacionado", ;
		1, 0, NIL, NIL, NIL, NIL, NIL, {"Não existe Medicação para esse Fornecedor/Docente."})
EndIf


RestArea(aArea)

Return
