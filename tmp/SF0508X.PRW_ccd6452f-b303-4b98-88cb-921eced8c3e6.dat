#INCLUDE 'PROTHEUS.CH'
#INCLUDE 'FWMVCDEF.CH' 

/*/{Protheus.doc} SF0508X
(long_description)
@author j2a.luizjunior
@since 13/07/2017
@version 1.0
@example
(examples)
@see (links_or_references)
/*/

User Function SF0508X

	Local cEstat := U_SFGN001A(ProcName(0), "SF0508X")
	Local   oBrowse  := Nil
	Local   aRotina  := {}
	Private cCart    := ""
	  
	//-> Instanciamento da Classe de Browse
	oBrowse := FWMBrowse():New()
	        
	//-> Definição da tabela do Browse
	oBrowse:SetAlias("ZH3")
	oBrowse:SetMenuDef("SF0508X")
	        
	// Titulo da Browse
	oBrowse:SetDescription("Produto x Cor")
	
	aRotina := MenuDef()
	        
	// Ativação da Classe
	oBrowse:Activate()

Return

/*/{Protheus.doc} MenuDef
(long_description)
@author j2a.luizjunior
@since 13/07/2017
@version 1.0
@return ${return}, ${return_description}
@example
(examples)
@see (links_or_references)
/*/

Static Function MenuDef()

	Local cEstat := U_SFGN001A(ProcName(0), "SF0508X")
	Local aRotina := {}
	
	ADD OPTION aRotina Title "Pesquisar"  Action "PesqBrw"         OPERATION 1 ACCESS 0
	ADD OPTION aRotina Title "Visualizar" Action "ViewDef.SF0508X" OPERATION 2 ACCESS 0
	ADD OPTION aRotina Title "Incluir"    Action "ViewDef.SF0508X" OPERATION 3 ACCESS 0
	ADD OPTION aRotina Title "Alterar"    Action "ViewDef.SF0508X" OPERATION 4 ACCESS 0
	ADD OPTION aRotina Title "Excluir"    Action "ViewDef.SF0508X" OPERATION 5 ACCESS 0 
 
Return(aRotina)

/*/{Protheus.doc} ModelDef
(long_description)
@author j2a.luizjunior
@since 13/07/2017
@version 1.0
@return ${return}, ${return_description}
@example
(examples)
@see (links_or_references)
/*/

Static Function ModelDef()

	Local cEstat := U_SFGN001A(ProcName(0), "SF0508X")
	Local   oStruZH3 := FWFormStruct(1,"ZH3")	
	Local   oModel   := MPFormModel():New("F0508X")
	
	oStruZH3:AddTrigger("ZH3_COD"  , "ZH3_DESC"  ,{|| .T.}, {|x| x := GATDESC(x)    })
		
	oModel:AddFields("ZH3UNICO", Nil  , oStruZH3)
	oModel:SetDescription("Produto X Cor")
	oModel:GetModel("ZH3UNICO"):SetDescription("Produto X Cor")      
	oModel:SetPrimaryKey({"ZH3_FILIAL","ZH3_COD"})

Return(oModel) 

/*/{Protheus.doc} ViewDef
(long_description)
@author j2a.luizjunior
@since 13/07/2017
@version 1.0
@return ${return}, ${return_description}
@example
(examples)
@see (links_or_references)
/*/

Static Function ViewDef()

	Local cEstat := U_SFGN001A(ProcName(0), "SF0508X")
	Local oModel   := FWLoadModel("SF0508X")
	Local oStruZH3 := FWFormStruct(2,"ZH3")
	Local oView	   := FWFormView():New()
	
	oView:SetModel(oModel)
	oView:AddField("VIEW_ZH3", oStruZH3, "ZH3UNICO")
	oView:CreateHorizontalBox("UM", 100)
	oView:SetOwnerView("VIEW_ZH3" , "UM")

Return(oView)	

/*/{Protheus.doc} GATDESC
(long_description)
@author j2a.luizjunior
@since 13/07/2017
@version 1.0
@example
(examples)
@see (links_or_references)
/*/

Static Function GATDESC(oField)
	
	Local cEstat := U_SFGN001A(ProcName(0), "SF0508X")
	Local cCod := oField:GetValue("ZH3_COD")
	Local cRet := Posicione("SB1",1, xFilial("SB1") + cCod ,"B1_DESC")
	 
Return cRet