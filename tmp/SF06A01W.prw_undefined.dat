#include 'protheus.ch'
#include 'parmtype.ch'
/*/{Protheus.doc} SF06A01W
//TODO Descrição User Function para validar título se aplica facilitação de recebimento em combate a crise COVID-19.
@author Walmir Junior
@since 23/04/2020
@version 1.0
Vencimento, Prefixo, 
@return return, lógico
@example
(examples)
@see (links_or_references)
/*/
user function SF06A01W(_dVenc, _cPref)
Local _cDtInCov := SuperGetMV( 'MV_XDInCOV',, STOD('20200401') )
Local _cDtFnCov := SuperGetMV( 'MV_XDFnCOV',, STOD('20200430') )
Local _cPrefCov := SuperGetMV( 'MV_XPrfCOV',, 'RMC#SGE')
Local _cDtInAtC := SuperGetMV( 'MV_XDInAtC',, STOD('20200401') )
Local _cDtFnAtC := SuperGetMV( 'MV_XDFnAtC',, STOD('20200630') )
Local _lRet := .F.

//Isenção aplicada a apenas rotina de cartão
If IsInCallStack("U_SFFN462A") .And. _dVenc >= _cDtInCov .And. _dVenc <= _cDtFnCov .And. _cPref $ _cPrefCov
	_lRet := .T.	

//Isenção aplicada a baixa por tela padrão
ElseIf IsInCallStack("FINA070") .And. Valtype(lF070Auto) == "L" .And. !lF070Auto .And. _dVenc >= _cDtInCov .And. _dVenc <= _cDtFnCov .And. _cPref $ _cPrefCov
	_lRet := .T.

//Isenção na atualização de boleto
ElseIf IsInCallStack("U_SF06A23X") .And. _dVenc >= _cDtInAtC .And. _dVenc <= _cDtFnAtC .And. _cPref $ _cPrefCov
	_lRet := .T.

EndIf

return _lRet