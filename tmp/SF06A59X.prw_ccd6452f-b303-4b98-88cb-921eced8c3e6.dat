#INCLUDE 'TOTVS.CH'
#INCLUDE 'FWMVCDEF.CH'

/*/{Protheus.doc} SF06A59X
@description MVC do Cadastro de desconto sobre renegociação

@author  Rafael Karczevski
@since   13/03/2020
@version 1.0 
/*/
User Function SF06A59X()

	Local oBrowse
	Local _lAcesso := .F.
	Private aRotina 	:= MenuDef()

	_lAcesso := U_TcSupOk()

	If !_lAcesso
		Alert("Esta operação somente poderá ser realizada por um Supervisor!")
		Return
	EndIF

	oBrowse := FWMBrowse():New()
	oBrowse:SetAlias( 'ZAQ' )
	oBrowse:SetDescription('Cadastro de desconto sobre renegociação')
	oBrowse:AddLegend("ZAQ_ATIVO == '1' ", "BR_VERDE" 		, "Ativo"	)
	oBrowse:AddLegend("ZAQ_ATIVO == '2' ", "BR_VERMELHO"	, "Inativo"	)
	
    oBrowse:Activate()
    
Return Nil

/*/{Protheus.doc} MenuDef   
@description Montagem do Menu

@author  Rafael Karczevski
@since   13/03/2020
@version 1.0 
/*/
Static Function MenuDef()

	Local aRotina := {}

	aAdd( aRotina, { 'Visualizar'   				, 'VIEWDEF.SF06A59X', 0, 2, 0, NIL } )
	aAdd( aRotina, { 'Incluir'      				, 'VIEWDEF.SF06A59X', 0, 3, 0, NIL } )
	aAdd( aRotina, { 'Alterar'    					, 'VIEWDEF.SF06A59X', 0, 4, 0, NIL } )

Return aRotina

/*/{Protheus.doc} ModelDef
@description Monta Model de apresentação

@author  Rafael Karczevski
@since   13/03/2020
@version 1.0 
/*/
Static Function ModelDef()

	Local oModel 	  := MPFormModel():New( 'MDSF6A59' )
	Local oSTRSF6A59M := FWFormStruct( 1, 'ZAQ' ) 

	oModel:AddFields( 'ZAQMASTER', , oSTRSF6A59M )
    oModel:SetPrimaryKey( {'ZAQ_FILIAL','ZAQ_CODCHA'} )
     
Return oModel

/*/{Protheus.doc} ViewDef
@description Apresentação do model e View junto

@author  Rafael Karczevski
@since   13/03/2020
@version 1.0 
/*/
Static Function ViewDef()

	Local oView
	Local oModel  := FWLoadModel( 'SF06A59X' )
	
	Local oSTRSF6A59M := FWFormStruct( 2, 'ZAQ') 

	oView := FWFormView():New()
	oView:SetModel( oModel )
	oView:AddField( 'VZAQMASTER', oSTRSF6A59M, 'ZAQMASTER' )
	oView:CreateHorizontalBox( 'CABECALHO', 100 )
	oView:SetOwnerView( 'VZAQMASTER', 'CABECALHO' )
	oView:EnableTitleView( 'VZAQMASTER' )
	
	oView:SetCloseOnOk( {|| .t.} )
	
Return oView

/*/{Protheus.doc} MDSF6A59
@description Ponto de Entrada Geral da Rotina
@author  Rafael Karczevski
@since   13/03/2020
		
@param PARAMIXB, Array, [Objeto][IdPonto][IdModel]

@return uRet,  Retorno diversos do PE

/*/
User Function MDSF6A59()

	Local uRet       := .t.
	Local aAreaOld   := GetArea()
	Local oModel     := ParamIXB[1]
	Local cIdPonto   := ParamIXB[2]
	Local cIdModel   := ParamIXB[3]
	Local nX         := 0	

	If cIdPonto == 'MODELPRE' /* Chamada antes da alteração de qualquer campo do modelo. */

	ElseIf cIdPonto == 'MODELPOS' /* Chamada na validação total do modelo. */
		
	ElseIf cIdPonto == 'FORMPRE' /* Chamada na antes da alteração de qualquer campo do formulário. */

	ElseIf cIdPonto == 'FORMPOS' /* Chamada na validação total do formulário. */

	ElseIf cIdPonto == 'FORMLINEPRE' /* Chamada na pre validação da linha do formulário. */
	
	ElseIf cIdPonto == 'FORMLINEPOS' /* Chamada na validação da linha do formulário. */
		
	ElseIf cIdPonto == 'MODELVLDACTIVE' /* Chamada na validação da ativação do Modelo. */
		
	ElseIf cIdPonto == 'MODELCOMMITTTS' /* Chamada apos a gravação total do modelo e dentro da transação. */

	ElseIf cIdPonto == 'MODELCOMMITNTTS' /* Chamada apos a gravação total do modelo e fora da transação. */
		
	ElseIf cIdPonto == 'FORMCOMMITTTSPRE' /* Chamada antes da gravação da tabela do formulário. */
		
	ElseIf cIdPonto == 'FORMCOMMITTTSPOS' /* Chamada apos a gravação da tabela do formulário. */
		
	ElseIf cIdPonto == 'MODELCANCEL' /* Cancela */
				
	ElseIf cIdPonto == 'BUTTONBAR' /* Usado para Criação de Botoes Estrutura: { {'Nome', 'Imagem Botap', { || bBlock } } } */
	
	EndIf
	
	RestArea(aAreaOld)
	
Return uRet