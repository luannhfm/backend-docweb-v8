#INCLUDE "PROTHEUS.CH"
#INCLUDE "TOPCONN.CH"
#INCLUDE "RWMAKE.CH"
#INCLUDE "FONT.CH"
#INCLUDE "COLORS.CH"  
#INCLUDE "PARMTYPE.CH"     
#INCLUDE "FWMBROWSE.CH"
#INCLUDE "FWMVCDEF.CH"
#INCLUDE "FWCOMMAND.CH"   

#DEFINE CRLF chr(13)+chr(10) 
/*
--------------------------------------------------------------------------------
{Protheus.doc} <SF7323X>
  #CONTROLE_DN - Modelo 3 MVC para Cadastros do Layouts das Remessas 
  Browser MVC para lancamentos dos [ZCJ - Layouts Remessas Integração DN]

@author Antonio Dantas 
@since 26/11/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/                                                                       
User Function SF7323X()

Local cEstat := U_SFGN001A(ProcName(0), "SF7323X")
Local _oBrowse 		:= FWMBrowse():New()
Private aRotina 	:= MenuDef() 
DbSelectArea("ZCJ")                                                                                  	
DbSetOrder(1)
ZCJ->(DbGoTop())
//-- Define o Alias
_oBrowse:SetAlias("ZCJ")
//-- Descricao
_oBrowse:SetDescription("Layouts Remessas Integração DN")
//-- 
_oBrowse:lLocate	:= .t.
//-- Para nao apresentar a Palheta de Detalhes do Registro
_oBrowse:oBrowseUI:lDetails	:= .f.	 
//-- Nao Permite que o Usuario Modifique (Altere) registros de outras filiais
_oBrowse:SetChgAll(.f.) 			  
//-- Não Permite que o usuario Visualize registro de outras filiais
_oBrowse:SetSeeAll(.f.) 			 
//-- Ativa o browse
_oBrowse:Activate()
Return Nil

/*
--------------------------------------------------------------------------------
{Protheus.doc} <MenuDef>
   Responsavel pela criacao dos botoes, alterar, incluir, excluir e demais. 

@author Antonio Dantas 
@since 26/11/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/                                                                       
Static Function MenuDef()

Local cEstat := U_SFGN001A(ProcName(0), "SF7323X")
Local _aRotina 	:= {}
ADD OPTION _aRotina TITLE "Pesquisar"	ACTION "PESQBRW"       		OPERATION 1 ACCESS 0
ADD OPTION _aRotina TITLE "Visualizar"	ACTION "VIEWDEF.SF7323X"	OPERATION 2 ACCESS 0
ADD OPTION _aRotina TITLE "Incluir"		ACTION "VIEWDEF.SF7323X"	OPERATION 3 ACCESS 0
ADD OPTION _aRotina TITLE "Alterar"		ACTION "VIEWDEF.SF7323X" 	OPERATION 4 ACCESS 0
ADD OPTION _aRotina TITLE "Excluir"		ACTION "VIEWDEF.SF7323X" 	OPERATION 5 ACCESS 0
ADD OPTION _aRotina TITLE "Imprimir"	ACTION "VIEWDEF.SF7323X" 	OPERATION 8 ACCESS 0
ADD OPTION _aRotina TITLE "Copiar"		ACTION "VIEWDEF.SF7323X" 	OPERATION 9 ACCESS 0
Return _aRotina

/*
--------------------------------------------------------------------------------
{Protheus.doc} <ModelDef>
   Contem  a  construcao e a definicao do Model, lembrando que o Modelo de
   dados (Model) contem as regras de negocio.

@author Antonio Dantas 
@since 26/11/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/  
Static Function ModelDef()

Local cEstat := U_SFGN001A(ProcName(0), "SF7323X")
Local _oModel	:= Nil 
Local _oStZCJ	:= FWFormStruct(1,"ZCJ")
//-- Objeto de modelo de dados
_oModel := MPFormModel():New("SF7323XX")
//-- A  estrutura  do  modelo  de  dados  (Model) 
_oModel:AddFields("ZCJMASTER",/*cOwner*/,_oStZCJ)
//-- Chave Primaria
_oModel:SetPrimaryKey({"ZCJ_FILIAL","ZCJ_CODIGO"})
Return _oModel

/*
--------------------------------------------------------------------------------
{Protheus.doc} <ViewDef>
   Contem a construcao e a definicao da View, ou seja, contrucao da interface

@author Antonio Dantas 
@since 26/11/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/  
Static Function ViewDef()

Local cEstat := U_SFGN001A(ProcName(0), "SF7323X")
Local _oModel 		:= FWLoadModel("SF7323X")
Local _oStZCJV		:= FWFormStruct(2,"ZCJ") 
Local _oView   	:= FWFormView():New()
//-- Defino modelo da view
_oView:SetModel(_oModel)
//-- Mesma regra do modeldef
_oView:AddField("VW_ZCJ",_oStZCJV,"ZCJMASTER")
//-- Crio a tela
_oView:CreateHorizontalBox("JUSTICAR",100)
//-- Defino owner da tela
_oView:SetOwnerView("VW_ZCJ","JUSTICAR")
Return _oView