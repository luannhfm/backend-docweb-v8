#INCLUDE "PROTHEUS.CH"
#INCLUDE "TOPCONN.CH"
#INCLUDE "RWMAKE.CH"
#INCLUDE "FONT.CH"
#INCLUDE "COLORS.CH"  
#INCLUDE "PARMTYPE.CH"     
#INCLUDE "FWMBROWSE.CH"
#INCLUDE "FWMVCDEF.CH"
#INCLUDE "FWCOMMAND.CH"    
/*
--------------------------------------------------------------------------------
{Protheus.doc} <SF0702X>
   Browser MVC para lancamentos dos [ZFA-Cadastros de Justificativas]

@author Antonio Dantas 
@since 23/09/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/                                                                       
User Function SF0702X()
Local _oBrowse 		:= FWMBrowse():New()
Private aRotina 	:= MenuDef() 
DbSelectArea("ZFA")                                                                                  	
DbSetOrder(1)
ZFA->(DbGoTop())
//-- Define o Alias
_oBrowse:SetAlias("ZFA")
//-- Descricao
_oBrowse:SetDescription("Cadastros das Justificativas")
//-- Ativa o browse
_oBrowse:Activate()
Return Nil

/*
--------------------------------------------------------------------------------
{Protheus.doc} <MenuDef>
   Responsavel pela criacao dos botoes, alterar, incluir, excluir e demais. 

@author Antonio Dantas 
@since 23/09/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/                                                                       
Static Function MenuDef()
Local _aRotina 	:= {}
ADD OPTION _aRotina TITLE "Pesquisar"  			ACTION "PESQBRW"         	OPERATION 1 ACCESS 0
ADD OPTION _aRotina TITLE "Visualizar" 			ACTION "VIEWDEF.SF0702X" 	OPERATION 2 ACCESS 0
ADD OPTION _aRotina TITLE "Incluir"    			ACTION "VIEWDEF.SF0702X" 	OPERATION 3 ACCESS 0
ADD OPTION _aRotina TITLE "Alterar"    			ACTION "VIEWDEF.SF0702X" 	OPERATION 4 ACCESS 0
ADD OPTION _aRotina TITLE "Excluir"   				ACTION "VIEWDEF.SF0702X" 	OPERATION 5 ACCESS 0
ADD OPTION _aRotina TITLE "Imprimir"   			ACTION "VIEWDEF.SF0702X" 	OPERATION 8 ACCESS 0
ADD OPTION _aRotina TITLE "Copiar"     			ACTION "VIEWDEF.SF0702X" 	OPERATION 9 ACCESS 0

Return _aRotina

/*
--------------------------------------------------------------------------------
{Protheus.doc} <ModelDef>
   Contem  a  construcao e a definicao do Model, lembrando que o Modelo de
   dados (Model) contem as regras de negocio.

@author Antonio Dantas 
@since 23/09/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/  
Static Function ModelDef()
Local _oModel	:= Nil 
Local _oStZFA	:= FWFormStruct(1,"ZFA")
//-- Objeto de modelo de dados
_oModel := MPFormModel():New("SF0702XX")
//-- A  estrutura  do  modelo  de  dados  (Model) 
_oModel:AddFields("ZFAMASTER",/*cOwner*/,_oStZFA)
//-- Chave Primaria
_oModel:SetPrimaryKey({"ZFA_FILIAL","ZFA_CODIGO"})
Return _oModel

/*
--------------------------------------------------------------------------------
{Protheus.doc} <ViewDef>
   Contem a construcao e a definicao da View, ou seja, contrucao da interface

@author Antonio Dantas 
@since 23/09/2015
@version<1.00>
@receive<Nil>
@return<Nil>
@example<Nil>
@see<Nil>
-------------------------------------------------------------------------------
*/  
Static Function ViewDef()
Local _oModel 		:= FWLoadModel("SF0702X")
Local _oStZFAV		:= FWFormStruct(2,"ZFA") 
Local _oView   	:= FWFormView():New()
//-- Defino modelo da view
_oView:SetModel(_oModel)
//-- Mesma regra do modeldef
_oView:AddField("VW_ZFA",_oStZFAV,"ZFAMASTER")
//-- Crio a tela
_oView:CreateHorizontalBox("JUSTICAR",100)
//-- Defino owner da tela
_oView:SetOwnerView("VW_ZFA","JUSTICAR")
Return _oView