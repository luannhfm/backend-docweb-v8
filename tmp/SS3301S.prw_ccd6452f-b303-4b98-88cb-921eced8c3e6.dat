#Include 'Protheus.ch'
#Include 'FWMVCDEF.CH'

/*/{Protheus.doc} SS3301S
(Função Criada para inclusão, Alteração e Exclusao de Trabalhadores)

@author 	Sergio Ricardo Leite Salustiano
@since 		27/05/2014
@version 	1.0

@return Nil, Nulo
/*/

User Function SS3301S()

	Local oBrowse
	oBrowse:= FWMBrowse():New()
	oBrowse:SetAlias('ZZ0')
	oBrowse:SetDescription('Cadastro de Trabalhador')
	oBrowse:Activate()
	
Return Nil

Static Function MenuDef()

	Local aRotina := {}

	ADD OPTION aRotina Title 'Visualizar' Action 'VIEWDEF.SS3301S' OPERATION 2 ACCESS 0
	ADD OPTION aRotina Title 'Incluir'    Action 'VIEWDEF.SS3301S' OPERATION 3 ACCESS 0
	ADD OPTION aRotina Title 'Alterar'    Action 'VIEWDEF.SS3301S' OPERATION 4 ACCESS 0
	ADD OPTION aRotina Title 'Excluir'    Action 'VIEWDEF.SS3301S' OPERATION 5 ACCESS 0
	ADD OPTION aRotina Title 'Imprimir'   Action 'VIEWDEF.SS3301S' OPERATION 8 ACCESS 0
	ADD OPTION aRotina Title 'Copiar'     Action 'VIEWDEF.SS3301S' OPERATION 9 ACCESS 0

Return aRotina

Static Function ModelDef()

	Local oStruZZ0 :=FWFormStruct(1,'ZZ0')
	Local oModel
	
	oModel := MPFormModel():New('SS3301M')
	oModel:AddFields('ZZ0MASTER',/*cOwner*/,oStruZZ0)
	oModel:SetDescription('Cadastro de Trabalhadores')
	oModel:GetModel('ZZ0MASTER'):SetDescription('Cadastro do Trabalhador')
	
	If FunName() = 'SS3301S'
		oStruZZ0:SetProperty( 'ZZ0_CPF' , MODEL_FIELD_OBRIGAT, .T. )
	EndIf
	
Return oModel

Static Function ViewDef()

	Local oModel   := FWLoadModel('SS3301S')
	Local oStruZZ0 := FWFormStruct(2,'ZZ0')
	Local oView

	oView := FWFormView():New()
	oView:SetModel(oModel)
	oView:AddField('VIEW_ZZ0', oStruZZ0, 'ZZ0MASTER')
	oView:CreateHorizontalBox('TELA',100)
	oView:SetOwnerView('VIEW_ZZ0','TELA')
	//oView:AddUserButton('Consulta S4', 'CLIPS', {|oView|IMPTRAB()})
		
Return oView