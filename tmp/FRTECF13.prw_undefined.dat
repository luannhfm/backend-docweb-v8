#INCLUDE 'PROTHEUS.CH'


/*/{Protheus.doc} FRTECF13
@description Ponto de entrada para indicar se o ECF faz o arredondamento (.T.) ou truncamento (.F.) dos valores.

@author  Helitom Silva
@since   06/09/2019
@version 1.0

@return lRet, Logico, 

@type function
@see (links_or_references)
/*/
User Function FRTECF13()
	
	Local lRet		 := .T.
	Local cMVARREFAT := SuperGetMv('MV_ARREFAT')
	Local cCodProd   := ''
	Local nVlUnit    := 0
	Local nQuant     := 0
	Local nPosXPcTab := 0
	Local cTabPrecos := ''
		
	If IsInCallStack('Lj7VlItem')
	
		cCodProd   := ParamIXB[1]
		nVlUnit    := ParamIXB[2]
		nQuant     := ParamIXB[3]
		nPosXPcTab := Ascan(aHeader, {|x| AllTrim(Upper(x[2])) == "LR_XVLRITE"})
		cTabPrecos := ''

		If !Empty(cCodProd)
		
		 	cTabPrecos := LjXETabPre(M->LQ_CLIENTE, M->LQ_LOJA)	
		
			aCols[n][nPosXPcTab] := StaticCall(LOJXFUNE, LjXETPreco, cCodProd, M->LQ_CLIENTE, M->LQ_LOJA, 1, nQuant, cTabPrecos)
		
			If aCols[n][nPosXPcTab] > 0
				aCols[n][nPosXPcTab] := (aCols[n][nPosXPcTab] * nQuant)
			EndIf
			
		EndIf
	
	EndIf
	
	lRet := Iif(cMVARREFAT = 'S', .T., .F.)
	
Return lRet