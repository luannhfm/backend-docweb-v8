#Include 'Protheus.ch'
//-------------------------------------------------------------------
/*/{Protheus.doc} SF0210X

@author Walmir Junior

@since	02.03.2016
@Obs:
	Trafegar informações da Solicitação de Armazem para Pré-Requisição.

---------------------------------------------------------------------
Programador		Data		Motivo
---------------------------------------------------------------------
/*/
User Function MT106PRE()
Local _aSCQ 	:=  PARAMIXB
Local _aArea 	:= GetArea()
Local _aAreaSCQ := SCQ->(GetArea())
Local _aAreaSCP := SCP->(GetArea())
Local _nx		:= 0

For _nx := 1 To Len(_aSCQ)
	DbSelectArea("SCP")
	DBSetOrder(1)
	If SCP->(DbSeek(_aSCQ[_nx,1]+_aSCQ[_nx,2]+_aSCQ[_nx,3]))
		DbSelectArea("SCQ")
		DBSetOrder(1)
		If SCQ->(DbSeek(_aSCQ[_nx,1]+_aSCQ[_nx,2]+_aSCQ[_nx,3]))
			RecLock("SCQ", .F.)
			
			SCQ->CQ_XFILCN9 := SCP->CP_XFILCN9
			SCQ->CQ_XNUMCN9 := SCP->CP_XNUMCN9
			SCQ->CQ_XREVCN9 := SCP->CP_XREVCN9
			SCQ->CQ_XDESCTR := SCP->CP_XDESCTR
			SCQ->CQ_XCLIENT := SCP->CP_XCLIENT
			SCQ->CQ_XCLILJ	:= SCP->CP_XCLILJ
			SCQ->CQ_XRAZCLI := SCP->CP_XRAZCLI
			
			SCQ->(MsUnLock())
		EndIf
	EndIf
Next _nx

RestArea(_aAreaSCP)
RestArea(_aAreaSCQ)
RestArea(_aArea)

Return

